<div class="p-fluid">
  <form [formGroup]="form" [ngClass]="{ 'ng-submitted': formSubmitted }" id="form">
    <div class="grid">
      <div class="col-12">
        <h1>FORM 1M</h1>
        <h5>NOTIFICATION OF MULTICANDIDATE STATUS</h5>
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <hr />
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <h2>Committee</h2>
      </div>
    </div>
    <div class="grid">
      <div class="col-9">
        <div class="field">
          <label for="committee_name">COMMITTEE NAME</label>
          <input
            [readonly]="true"
            class="readonly"
            formControlName="committee_name"
            id="committee_name"
            pInputText
            type="text"
          />
          <app-error-messages
            [formSubmitted]="formSubmitted"
            [form]="form"
            fieldName="committee_name"
          ></app-error-messages>
        </div>
      </div>
      <div class="col-3">
        <div class="field">
          <label for="filer_committee_id_number">COMMITTEE ID</label>
          <input
            [readonly]="true"
            class="readonly"
            formControlName="filer_committee_id_number"
            id="filer_committee_id_number"
            pInputText
            type="text"
          />
          <app-error-messages
            [formSubmitted]="formSubmitted"
            [form]="form"
            fieldName="committee_id"
          ></app-error-messages>
        </div>
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <div class="field">
          <label for="committee_type">TYPE OF COMMITTEE</label>
        </div>
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <p-radioButton
          [class]="
            committeeTypeControl?.invalid &&
            (formSubmitted || committeeTypeControl?.dirty || committeeTypeControl?.touched)
              ? 'ng-invalid ng-dirty'
              : ''
          "
          formControlName="committee_type"
          inputId="X"
          label="STATE PARTY"
          name="committee_type"
          value="X"
        ></p-radioButton>
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <p-radioButton
          [class]="
            committeeTypeControl?.invalid &&
            (formSubmitted || committeeTypeControl?.dirty || committeeTypeControl?.touched)
              ? 'ng-invalid ng-dirty'
              : ''
          "
          formControlName="committee_type"
          inputId="N"
          label="OTHER"
          name="committee_type"
          value="N"
        ></p-radioButton>
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <app-error-messages
          [formSubmitted]="formSubmitted"
          [form]="form"
          fieldName="committee_type"
          requiredErrorMessage="An answer is required."
        ></app-error-messages>
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <hr />
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <h2>Address</h2>
      </div>
    </div>
    <app-address-input [form]="form" [readonly]="true" [templateMap]="templateMap"></app-address-input>
    <div class="grid">
      <div class="col-12">
        <hr />
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <p>I certify that one of the following situations is correct:</p>
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <label for="statusBy">STATUS BY</label>
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <p-radioButton
          [class]="
            statusByControl?.invalid && (formSubmitted || statusByControl?.dirty || statusByControl?.touched)
              ? 'ng-invalid ng-dirty'
              : ''
          "
          formControlName="statusBy"
          inputId="affiliation"
          label="AFFILIATION"
          name="statusBy"
          value="affiliation"
        ></p-radioButton>
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <p-radioButton
          [class]="
            statusByControl?.invalid && (formSubmitted || statusByControl?.dirty || statusByControl?.touched)
              ? 'ng-invalid ng-dirty'
              : ''
          "
          formControlName="statusBy"
          inputId="qualification"
          label="QUALIFICATION"
          name="statusBy"
          value="qualification"
        ></p-radioButton>
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <app-error-messages
          [formSubmitted]="formSubmitted"
          [form]="form"
          fieldName="statusBy"
          requiredErrorMessage="An answer is required."
        ></app-error-messages>
      </div>
    </div>
    <ng-container *ngIf="statusByControl?.value === 'affiliation'">
      <div class="grid">
        <div class="col-12">
          <h2>Affiliation</h2>
          <p>
            The committee submitted its Statement of Organization (FORM 1) and simultaneously qualified as a
            multicandidate committee through its affiliation with:
          </p>
        </div>
      </div>
      <div class="grid">
        <div class="col-12">
          <div
            [ngClass]="{
              'transaction-contact-invalid': affiliatedContact.control?.status === 'INVALID'
            }"
            class="field"
          >
            <label for="entity_type">LOOKUP</label>
            <app-transaction-contact-lookup
              (contactSelect)="affiliatedContact.update($event)"
              [contactTypeOptions]="affiliatedContact.contactTypeOptions"
              [formSubmitted]="formSubmitted"
              [form]="form"
            >
            </app-transaction-contact-lookup>
            <app-error-messages
              [fieldName]="affiliatedContact.contactLookupKey"
              [formSubmitted]="formSubmitted"
              [form]="form"
            ></app-error-messages>
          </div>
        </div>
      </div>
      <ng-container *ngIf="report.contact_affiliated">
        <div class="grid">
          <div class="col-9">
            <div class="field">
              <label for="affiliated_committee_name">AFFILIATED COMMITTEE NAME</label>
              <input
                formControlName="affiliated_committee_name"
                id="affiliated_committee_name"
                pInputText
                type="text"
              />
              <app-error-messages
                [formSubmitted]="formSubmitted"
                [form]="form"
                fieldName="affiliated_committee_name"
              ></app-error-messages>
            </div>
          </div>
          <div class="col-3">
            <div class="field">
              <label for="affiliated_committee_fec_id">AFFILIATED COMMITTEE ID</label>
              <input
                formControlName="affiliated_committee_fec_id"
                id="affiliated_committee_fec_id"
                pInputText
                type="text"
              />
              <app-error-messages
                [formSubmitted]="formSubmitted"
                [form]="form"
                fieldName="affiliated_committee_fec_id"
              ></app-error-messages>
            </div>
          </div>
        </div>
        <div class="grid">
          <div class="col-3">
            <div class="field">
              <label for="name">AFFILIATED DATE</label>
              <p-calendar
                formControlName="affiliated_date_form_f1_filed"
                inputId="affiliated_date_form_f1_filed"
                name="affiliated_date_form_f1_filed"
              ></p-calendar>
              <app-error-messages
                [formSubmitted]="formSubmitted"
                [form]="form"
                fieldName="affiliated_date_form_f1_filed"
              ></app-error-messages>
            </div>
          </div>
        </div>
        <div class="grid">
          <div class="col-12">
            <hr />
          </div>
        </div>
      </ng-container>
    </ng-container>
    <ng-container *ngIf="statusByControl?.value === 'qualification'">
      <div class="grid">
        <div class="col-12">
          <h2>Qualification</h2>
        </div>
      </div>
      <div class="grid">
        <div class="col-4">
          <div class="field">
            <label for="date_of_51st_contributor">DATE OF 51<sup>st</sup> CONTRIBUTION</label>
            <p-calendar
              formControlName="date_of_51st_contributor"
              inputId="date_of_51st_contributor"
              name="date_of_51st_contributor"
            ></p-calendar>
            <app-error-messages
              [formSubmitted]="formSubmitted"
              [form]="form"
              fieldName="date_of_51st_contributor"
            ></app-error-messages>
          </div>
        </div>
        <div class="col-4">
          <div class="field">
            <label for="date_of_original_registration">DATE OF ORIGINAL REGISTRATION</label>
            <p-calendar
              formControlName="date_of_original_registration"
              inputId="date_of_original_registration"
              name="date_of_original_registration"
            ></p-calendar>
            <app-error-messages
              [formSubmitted]="formSubmitted"
              [form]="form"
              fieldName="date_of_original_registration"
            ></app-error-messages>
          </div>
        </div>
        <div class="col-4">
          <div class="field">
            <label for="date_committee_met_requirements">DATE COMMITTEE MET REQUIREMENTS</label>
            <p-calendar
              formControlName="date_committee_met_requirements"
              inputId="date_committee_met_requirements"
              name="date_committee_met_requirements"
            ></p-calendar>
            <app-error-messages
              [formSubmitted]="formSubmitted"
              [form]="form"
              fieldName="date_committee_met_requirements"
            ></app-error-messages>
          </div>
        </div>
      </div>
      <div class="grid">
        <div class="col-12">
          <p>The committee has made contributions to the five (5) federal candidates listed below:</p>
        </div>
      </div>
      <ng-container *ngFor="let candidateContact of candidateContacts; index as i">
        <div class="grid">
          <div class="col-12">
            <h4>Candidate #{{ i + 1 }}</h4>
          </div>
        </div>
        <div class="grid">
          <div class="col-12">
            <div
              [ngClass]="{
                'transaction-contact-invalid': candidateContact.control?.status === 'INVALID'
              }"
              class="field"
            >
              <label for="entity_type">LOOKUP</label>
              <app-transaction-contact-lookup
                (contactSelect)="candidateContact.update($event)"
                [contactTypeOptions]="candidateContact.contactTypeOptions"
                [formSubmitted]="formSubmitted"
                [form]="form"
              >
              </app-transaction-contact-lookup>
              <app-error-messages
                [fieldName]="candidateContact.contactLookupKey"
                [formSubmitted]="formSubmitted"
                [form]="form"
                requiredErrorMessage="Candidate information is required"
              ></app-error-messages>
            </div>
          </div>
        </div>
        <ng-container *ngIf="report[candidateContact.contactKey]">
          <app-name-input
            [formSubmitted]="formSubmitted"
            [form]="form"
            [templateMap]="templateMapConfigs[candidateContact.contactKey]"
            labelPrefix="CANDIDATE"
            templateMapKeyPrefix="candidate"
          ></app-name-input>
          <div class="grid">
            <div class="col-3">
              <div class="field">
                <label [for]="templateMapConfigs[candidateContact.contactKey]['candidate_fec_id']">CANDIDATE ID</label>
                <input
                  [formControlName]="templateMapConfigs[candidateContact.contactKey]['candidate_fec_id']"
                  [id]="templateMapConfigs[candidateContact.contactKey]['candidate_fec_id']"
                  pInputText
                  type="text"
                />
                <app-error-messages
                  [fieldName]="templateMapConfigs[candidateContact.contactKey]['candidate_fec_id']"
                  [formSubmitted]="formSubmitted"
                  [form]="form"
                  uniqueFecIdMessage="Candidate already entered in form."
                ></app-error-messages>
              </div>
            </div>
            <div class="col-9" style="margin-top: -9px">
              <app-candidate-office-input
                [districtFormControlName]="templateMapConfigs[candidateContact.contactKey]['candidate_district']"
                [formSubmitted]="formSubmitted"
                [form]="form"
                [officeFormControlName]="templateMapConfigs[candidateContact.contactKey]['candidate_office']"
                [stateFormControlName]="templateMapConfigs[candidateContact.contactKey]['candidate_state']"
              >
              </app-candidate-office-input>
            </div>
          </div>
          <div class="grid">
            <div class="col-3">
              <div class="field">
                <label for="name">DATE OF CONTRIBUTION</label>
                <p-calendar
                  [formControlName]="candidateContact.dateOfContributionField"
                  [inputId]="candidateContact.dateOfContributionField"
                  [name]="candidateContact.dateOfContributionField"
                ></p-calendar>
                <app-error-messages
                  [fieldName]="candidateContact.dateOfContributionField"
                  [formSubmitted]="formSubmitted"
                  [form]="form"
                ></app-error-messages>
              </div>
            </div>
          </div>
        </ng-container>
        <div class="grid">
          <div class="col-12">
            <hr />
          </div>
        </div>
      </ng-container>
    </ng-container>
  </form>
  <div class="grid">
    <div class="col-2">
      <button (click)="goBack()" class="p-button-secondary" label="Back" pButton pRipple></button>
    </div>
    <div class="col-5"></div>
    <div class="col-2 align-right">
      <button (click)="save()" appSingleClick class="p-button-primary" label="Save" pButton pRipple></button>
    </div>
    <div class="col-3 align-right">
      <button
        (click)="save('continue')"
        appSingleClick
        class="p-button-info"
        label="Save and continue"
        pButton
        pRipple
      ></button>
    </div>
  </div>
</div>

<p-confirmDialog [style]="{ width: '450px' }" key="dialog"></p-confirmDialog>
