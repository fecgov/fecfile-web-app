<h1>{{ transaction?.transactionType?.title }}</h1>
@if (transactionType?.subTitle) {
  <div>{{ transactionType?.subTitle }}</div>
}
@if ((activeReport$ | async)?.report_type === reportTypes.F24) {
  <app-independent-expenditure-create-f3x-input></app-independent-expenditure-create-f3x-input>
}
@if (isEditable) {
  <h4 class="read-only-tag subtitle">READ ONLY</h4>
}

<p class="group-description">{{ transactionType?.description }}</p>
<p-accordion expandIcon="pi pi-angle-right" value="0">
  <p-accordion-panel value="0">
    <p-accordion-header>
      <div class="flex align-items-center">
        <strong>{{ transactionType?.accordionTitle }}:</strong>
        <p class="accordion-subtext">
          {{ transactionType?.accordionSubText }}
        </p>
      </div>
    </p-accordion-header>
    <p-accordion-content>
      @if (transactionType?.formTitle) {
        <h2>
          {{ transactionType?.formTitle }}
        </h2>
      }

      <h3>{{ transactionType?.contactTitle }}</h3>
      <form id="form" [formGroup]="form" [class.ng-submitted]="formSubmitted">
        <app-transaction-input
          [activeReport$]="activeReport$"
          [isEditable]="isEditable"
          [form]="form"
          [formSubmitted]="formSubmitted"
          [transaction]="transaction"
          [contactTypeOptions]="contactTypeOptions"
          [memoCodeCheckboxLabel$]="memoCodeCheckboxLabel$"
          (primaryContactSelect)="updateFormWithPrimaryContact($event)"
          (candidateContactSelect)="updateFormWithCandidateContact($event)"
          (secondaryContactSelect)="updateFormWithSecondaryContact($event)"
          (tertiaryContactSelect)="updateFormWithTertiaryContact($event)"
        >
        </app-transaction-input>
      </form>
    </p-accordion-content>
  </p-accordion-panel>

  <p-accordion-panel value="1">
    <p-accordion-header>
      <div class="flex align-items-center">
        <strong>{{ childTransactionType?.accordionTitle }}:</strong>
        <p class="accordion-subtext">
          {{ childTransactionType?.accordionSubText }}
        </p>
      </div>
    </p-accordion-header>
    <p-accordion-content>
      <h2>{{ childTransaction?.transactionType?.title }}</h2>
      @if (childTransactionType?.description) {
        <p>
          <em [innerHtml]="childTransactionType?.description"></em>
        </p>
      }

      <h3>{{ childTransactionType?.contactTitle }}</h3>
      <form id="childForm" [formGroup]="childForm" [class.ng-submitted]="formSubmitted">
        <app-transaction-input
          [isEditable]="isEditable"
          [form]="childForm"
          [formSubmitted]="formSubmitted"
          [transaction]="childTransaction"
          [contactTypeOptions]="childContactTypeOptions"
          [memoCodeCheckboxLabel$]="childMemoCodeCheckboxLabel$"
          [contributionAmountReadOnly]="true"
          (primaryContactSelect)="childUpdateFormWithPrimaryContact($event)"
          (candidateContactSelect)="childUpdateFormWithCandidateContact($event)"
          (secondaryContactSelect)="childUpdateFormWithSecondaryContact($event)"
          (tertiaryContactSelect)="childUpdateFormWithTertiaryContact($event)"
        >
        </app-transaction-input>
      </form>
    </p-accordion-content>
  </p-accordion-panel>
</p-accordion>
