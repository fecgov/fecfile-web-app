<div class="flex gap-2">
  <h1>{{ transaction?.transactionType?.title }}</h1>
  @if (showGlossary) {
    <img
      class="cursor-pointer"
      src="assets/img/i-book.svg"
      draggable="false"
      alt="book"
      (click)="openGlossary()"
      (keypress)="openGlossary()"
    />
  }
</div>

@if (transactionType?.subTitle) {
  <div>{{ transactionType?.subTitle }}</div>
}
@if (activeReport().report_type === reportTypes.F24) {
  <app-independent-expenditure-create-f3x-input />
}
@if (!isEditable()) {
  <h4 class="read-only-tag subtitle">READ ONLY</h4>
}

<p class="group-description">{{ transactionType?.description }}</p>
<p-accordion
  expandIcon="pi pi-angle-right"
  [(value)]="accordionValue"
  [transitionOptions]="animationTime + 'ms cubic-bezier(0.86, 0, 0.07, 1)'"
>
  <p-accordion-panel [value]="0" data-cy="accordion-panel-0">
    <p-accordion-header>
      <div class="flex align-items-center">
        <strong>{{ transactionType?.accordionTitle }}:</strong>
        <p class="accordion-subtext">
          {{ transactionType?.accordionSubText }}
        </p>
      </div>
    </p-accordion-header>
    <p-accordion-content>
      <div class="content-accordion-wrapper">
        @if (transactionType?.formTitle) {
          <h2>
            {{ transactionType?.formTitle }}
          </h2>
        }
        <h2>{{ transactionType?.contactTitle }}</h2>
        <form id="form" [formGroup]="form" [class.ng-submitted]="formSubmitted">
          <app-transaction-input
            [isEditable]="isEditable()"
            [form]="form"
            [formSubmitted]="formSubmitted"
            [transaction]="transaction"
            [contactTypeOptions]="contactTypeOptions"
            [memoHasOptional$]="memoHasOptional$"
            (primaryContactSelect)="updateFormWithPrimaryContact($event)"
            (primaryContactClear)="clearFormPrimaryContact()"
            (candidateContactSelect)="updateFormWithCandidateContact($event)"
            (secondaryContactSelect)="updateFormWithSecondaryContact($event)"
            (tertiaryContactSelect)="updateFormWithTertiaryContact($event)"
          >
          </app-transaction-input>
        </form>
      </div>
    </p-accordion-content>
  </p-accordion-panel>

  <p-accordion-panel [value]="1" data-cy="accordion-panel-1">
    <p-accordion-header>
      <div class="flex align-items-center">
        <strong>{{ childTransactionType?.accordionTitle }}:</strong>
        <p class="accordion-subtext">
          {{ childTransactionType?.accordionSubText }}
        </p>
      </div>
    </p-accordion-header>
    <p-accordion-content>
      <div class="content-accordion-wrapper">
        <h2>{{ childTransaction?.transactionType?.title }}</h2>
        @if (childTransactionType?.description) {
          <p>
            <em [innerHtml]="childTransactionType?.description"></em>
          </p>
        }

        <h2>{{ childTransactionType?.contactTitle }}</h2>
        <form id="childForm" [formGroup]="childForm" [class.ng-submitted]="formSubmitted">
          <app-transaction-input
            [isEditable]="isEditable()"
            [form]="childForm"
            [formSubmitted]="formSubmitted"
            [transaction]="childTransaction"
            [contactTypeOptions]="childContactTypeOptions"
            [memoHasOptional$]="childMemoHasOptional$"
            [contributionAmountReadOnly]="true"
            (primaryContactSelect)="childUpdateFormWithPrimaryContact($event)"
            (primaryContactClear)="childClearFormPrimaryContact()"
            (candidateContactSelect)="childUpdateFormWithCandidateContact($event)"
            (secondaryContactSelect)="childUpdateFormWithSecondaryContact($event)"
            (tertiaryContactSelect)="childUpdateFormWithTertiaryContact($event)"
          >
          </app-transaction-input>
        </form>
      </div>
    </p-accordion-content>
  </p-accordion-panel>
</p-accordion>
