<div class="card">
  <p-toolbar styleClass="mb-4">
    <ng-template pTemplate="left">
      <div class="grid">
        <div class="col-12">
          <h1 class="gandhi-bold size-36">Transactions in this report</h1>
        </div>
        <div class="col-12">
          <span class="subtitle"
          ><strong>{{ report?.formLabel }}</strong
          >{{ report?.formSubLabel }}</span
          >
        </div>
      </div>
    </ng-template>

    <ng-template pTemplate="right">
      <app-table-actions-button
        *ngIf="report?.report_status === reportStatus.IN_PROGRESS"
        [tableActions]="tableActions"
        [actionItem]="report"
        (tableActionClick)="onTableActionClick($event.action, $event.actionItem)"
        buttonIcon="pi pi-plus"
        buttonLabel="Add new transaction"
        buttonStyleClass="mr-2 add-button"
        buttonAriaLabel="Add a Transaction"
      ></app-table-actions-button>
    </ng-template>
  </p-toolbar>
  <app-transaction-receipts *ngIf="report?.report_type !== reportTypes.F24"></app-transaction-receipts>
  <app-transaction-disbursements></app-transaction-disbursements>
  <app-transaction-loans-and-debts *ngIf="report?.report_type !== reportTypes.F24"></app-transaction-loans-and-debts>
</div>

<p-confirmDialog #cd [style]="{ width: '450px' }">
  <ng-template pTemplate="footer">
    <span class="confirm-footer">
      <button type="button" pButton class="p-button-secondary" label="Cancel" (click)="cd.reject()"></button>
      <button type="button" pButton label="Confirm" (click)="cd.accept()"></button>
    </span>
  </ng-template>
</p-confirmDialog>

<dialog #selectReportDialog>
  <div tabindex="-1" aria-labelledby="dialog-title" aria-hidden="true">
    <div class="dialog-content">
      <div class="dialog-header">
        <h1 class="dialog-title" id="dialog-title">Select a report</h1>
        <button type="button" class="btn-close" (click)="selectReportDialog.close()" aria-label="Cancel"></button>
      </div>
      <div class="dialog-body">
        <p>
          Pick the open report on which you would like to reattribute a contribution or a portion of it to a different
          contributor.
        </p>
        <label for="report-selector">OPEN REPORTS</label>
        <select id="report-selector" class="form-select" aria-label="Default select example"
                [(ngModel)]="selectedReport">
          <option selected></option>
          <option *ngFor="let report of availableReports" [ngValue]="report">
            {{report.formLabel}}: {{report.formSubLabel}}
          </option>
        </select>
      </div>
      <div class="dialog-footer">
        <button pButton pRipple class="p-button-secondary" (click)="selectReportDialog.close()">Cancel</button>
        <button
          pButton
          pRipple
          class="p-button-primary"
          [disabled]="!selectedReport"
          (click)="createReattribution()"
          label="Continue"
        ></button>
      </div>
    </div>
  </div>
</dialog>
