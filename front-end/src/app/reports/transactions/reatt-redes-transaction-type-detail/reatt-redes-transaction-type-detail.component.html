<h1>{{ transaction?.transactionType?.title }}</h1>
<div *ngIf="transactionType?.subTitle">{{ transactionType?.subTitle }}</div>
<h4 class="read-only-tag subtitle" *ngIf="!isEditable">READ ONLY</h4>
<p class="group-description">{{ transactionType?.description }}</p>
<p-accordion [activeIndex]="accordionActiveIndex">
  <app-transaction-accordion-tab
    [transaction]="transaction"
    [transactionType]="transactionType"
    [isEditable]="isEditable"
    [form]="form"
    [formSubmitted]="formSubmitted"
    [contactTypeOptions]="contactTypeOptions"
    [memoCodeCheckboxLabel$]="memoCodeCheckboxLabel$"
    (updateFormWithPrimaryContact)="updateFormWithPrimaryContact($event)"
    (updateFormWithCandidateContact)="updateFormWithCandidateContact($event)"
    (updateFormWithSecondaryContact)="updateFormWithSecondaryContact($event)"
    (updateFormWithTertiaryContact)="updateFormWithTertiaryContact($event)"
  >
  </app-transaction-accordion-tab>

  <app-transaction-accordion-tab
    [transaction]="childTransaction"
    [transactionType]="childTransactionType"
    [isEditable]="isEditable"
    [form]="childForm"
    [formSubmitted]="formSubmitted"
    [contactTypeOptions]="childContactTypeOptions"
    [memoCodeCheckboxLabel$]="childMemoCodeCheckboxLabel$"
    (updateFormWithPrimaryContact)="childUpdateFormWithPrimaryContact($event)"
    (updateFormWithCandidateContact)="childUpdateFormWithCandidateContact($event)"
    (updateFormWithSecondaryContact)="childUpdateFormWithSecondaryContact($event)"
    (updateFormWithTertiaryContact)="childUpdateFormWithTertiaryContact($event)"
  >
  </app-transaction-accordion-tab>

  <p-accordionTab *ngIf="pullForward">
    <ng-template pTemplate="header">
      <strong>AUTO-POPULATED:</strong>
      <p style="font-weight: normal">
        Duplicate of the original transaction
      </p>
    </ng-template>
    <div class="p-fluid">
      <h2 *ngIf="originating.transactionType?.showParentTransactionTitle">
        {{ originating.transaction?.parent_transaction?.transactionType?.title }}
      </h2>
      <h2 [ngClass]="{ 'dark-gray-text': originating.transactionType?.showParentTransactionTitle }">
        {{ originating.transactionType?.title }}
      </h2>
      <div *ngIf="originating.transactionType?.subTitle">{{ originating.transactionType?.subTitle }}</div>
      <h3>{{ originating.transactionType?.contactTitle || 'Contact' }}</h3>
      <form id="pull-forward-form" [formGroup]="originating.form" [ngClass]="{ 'ng-submitted': formSubmitted }">
        <app-transaction-input
          [isEditable]="false"
          [form]="originating.form"
          [formSubmitted]="formSubmitted"
          [transaction]="originating.transaction"
          [contactTypeOptions]="originating.contactTypeOptions"
          [memoCodeCheckboxLabel$]="originating.memoCodeCheckboxLabel$"
        >
        </app-transaction-input>
      </form>

    </div>
  </p-accordionTab>
</p-accordion>

