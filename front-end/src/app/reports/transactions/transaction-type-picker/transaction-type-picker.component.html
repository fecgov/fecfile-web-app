<h1>{{ title() }}</h1>
@if (debtId()) {
  <p>Select the proper transaction type below to report this debt repayment.</p>
}
<div class="content-area">
  <p-accordion [(value)]="active">
    @for (transactionGroup of transactionGroups(); track transactionGroup; let index = $index) {
      @if (hasTransactions().get(transactionGroup)) {
        <p-accordion-panel [value]="index">
          <p-accordion-header>
            <div class="accordion-header-wrapper">
              <span class="header-label">{{ transactionGroup.label }}</span>
              <img
                class="accordion-icon"
                [src]="active() === index ? 'assets/img/i-minus-circle.svg' : 'assets/img/i-plus-circle.svg'"
                alt="toggle icon"
              />
            </div>
          </p-accordion-header>
          <p-accordion-content>
            <div class="accordion-content-wrapper">
              @for (transactionType of transactionTypes().get(transactionGroup); track transactionType) {
                <div class="transaction-type-wrapper">
                  @if (!isTransactionDisabled(transactionType)) {
                    <a
                      [routerLink]="getRouterLink(transactionType)"
                      [queryParams]="debtId() ? { debt: debtId() } : undefined"
                    >
                      {{ transactionType | label: transactionTypeLabels }}
                    </a>
                  } @else {
                    <div class="disabled">
                      {{ transactionType | label: transactionTypeLabels }}
                    </div>
                  }
                </div>
              }
            </div>
          </p-accordion-content>
        </p-accordion-panel>
      }
    }
  </p-accordion>
</div>
