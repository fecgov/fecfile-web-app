<p-toast></p-toast>

<div class="p-fluid">
  <p-card>
    <h1>Submit report</h1>
    <h5><strong>Form 3X:</strong> {{ report_code | label: f3xReportCodeDetailedLabels }}</h5>
    <p-divider></p-divider>
    <form id="form" [formGroup]="form" [ngClass]="{ 'ng-submitted': formSubmitted }">
      <div class="grid">
        <div class="col-12">
          <div class="field">
            <h3>Committee Treasurer</h3>
          </div>
        </div>
      </div>
      <div class="grid">
        <div class="col-4">
          <div class="field">
            <label for="treasurer_last_name"><strong>LAST NAME</strong></label>
            <input type="text" pInputText id="treasurer_last_name" formControlName="treasurer_last_name" />
            <app-error-messages
              [form]="form"
              fieldName="treasurer_last_name"
              [formSubmitted]="formSubmitted"
            ></app-error-messages>
          </div>
        </div>
        <div class="col-4">
          <div class="field">
            <label for="treasurer_first_name"><strong>FIRST NAME</strong></label>
            <input type="text" pInputText id="treasurer_first_name" formControlName="treasurer_first_name" />
            <app-error-messages
              [form]="form"
              fieldName="treasurer_first_name"
              [formSubmitted]="formSubmitted"
            ></app-error-messages>
          </div>
        </div>
        <div class="col-4">
          <div class="field">
            <label for="treasurer_middle_name"><strong>MIDDLE NAME</strong> (OPTIONAL)</label>
            <input type="text" pInputText id="treasurer_middle_name" formControlName="treasurer_middle_name" />
            <app-error-messages
              [form]="form"
              fieldName="treasurer_middle_name"
              [formSubmitted]="formSubmitted"
            ></app-error-messages>
          </div>
        </div>
      </div>
      <div class="grid">
        <div class="col-3">
          <div class="field">
            <label for="treasurer_prefix"><strong>PREFIX</strong> (OPTIONAL)</label>
            <input type="text" pInputText id="treasurer_prefix" formControlName="treasurer_prefix" />
            <app-error-messages
              [form]="form"
              fieldName="treasurer_prefix"
              [formSubmitted]="formSubmitted"
            ></app-error-messages>
          </div>
        </div>
        <div class="col-3">
          <div class="field">
            <label for="treasurer_suffix"><strong>SUFFIX</strong> (OPTIONAL)</label>
            <input type="text" pInputText id="treasurer_suffix" formControlName="treasurer_suffix" />
            <app-error-messages
              [form]="form"
              fieldName="treasurer_suffix"
              [formSubmitted]="formSubmitted"
            ></app-error-messages>
          </div>
        </div>
      </div>
      <p-divider></p-divider>
      <div class="grid">
        <div class="col-12">
          <h3>Enter Password</h3>
        </div>
        <div class="grid">
          <div class="col-12">
            <p>
              If you any questions on how to enroll, confirming your email, two-factor authentication, or your Personel
              Key please go to the following page:
              <a href="https://webforms.fec.gov/psa/help.htm" target="_blank" rel="noopener"
                >FEC Electronic Filing Password Assignment System Help</a
              >
            </p>
          </div>
        </div>
        <div class="col-6">
          <div class="field">
            <label for="filing_password">
              <strong>Electronic Filing Password </strong>
            </label>
            <input type="text" pInputText id="filing_password" formControlName="filing_password" />
            <app-error-messages
              [form]="form"
              fieldName="filing_password"
              [formSubmitted]="formSubmitted"
              patternErrorMessage="Must contain at least one upper case letter (A -Z), at least one lower case letter (a - z), at least one digit (0 - 9), and at least one special character ( !@#$%&*() )"
            ></app-error-messages>
          </div>
        </div>
      </div>
      <div class="grid">
        <div class="col-12">
          <div class="field">
            <strong>
              <p-checkbox
                [binary]="true"
                inputId="truth_statement"
                label="I certify that I have examined this Statement and to the best of my knowledge and belief it is true, correct, and complete. NOTE: Submission of false, erroneous, or incomplete information may subject the person signing this Statement to the penalties of 52 U.S.C. ยง 30109."
                formControlName="truth_statement"
                [trueValue]="true"
                [falseValue]="false"
              ></p-checkbox>
            </strong>
          </div>
        </div>
      </div>
      <div class="grid" *ngIf="!cohNeededFlag || (cohNeededFlag && report!.L6a_cash_on_hand_jan_1_ytd !== null)">
        <div class="col-4"></div>
        <div class="col-4">
          <button
            *ngIf="form.value.truth_statement === true"
            pButton
            pRipple
            label="Submit"
            class="p-button"
            (click)="submit()"
          ></button>
          <button
            *ngIf="form.value.truth_statement === false"
            pButton
            pRipple
            label="Submit"
            class="p-button"
            disabled
          ></button>
          <p-confirmDialog [style]="{ width: '60vw' }"></p-confirmDialog>
        </div>
        <ng-container *ngIf="loading > 0">
          <div class="col-4">
            <p *ngIf="loading === 1">Updating Treasurer Name...</p>
            <p *ngIf="loading === 2">Submitting Report to the FEC...</p>
          </div>
        </ng-container>
      </div>
      <div class="grid" *ngIf="cohNeededFlag && this.report!.L6a_cash_on_hand_jan_1_ytd === null">
        <div class="col-12">*** You may not submit a report until you have entered an amount for Cash on Hand ***</div>
      </div>
    </form>
  </p-card>
  <div class="grid">
    <div class="col-3">
      <button pButton pRipple label="Back" class="p-button-secondary p-button-outlined" (click)="back()"></button>
    </div>
  </div>
</div>
