<div id="print-preview-container" [class.sidebar-version]="layoutService.showSidebar()">
  <h1 data-cy="print-preview">Print preview</h1>
  <hr class="mb-5" />

  @if (webPrintStage === 'checking') {
    <div class="flex justify-content-center">
      <div class="fec-loader-div">
        <img
          class="image-max-width fec-loader-image top-30"
          ngSrc="assets/img/fec-loading-flag.gif"
          draggable="false"
          alt="The report's web print status is loading..."
          height="103"
          width="114"
        />
        <h2 class="align-center super-header h1">
          <br /><br />
          <strong>Compiling your preview</strong>
          <br />
        </h2>
      </div>
    </div>
  } @else {
    <div class="flex">
      <div class="w-6 gap-5 flex flex-column">
        @if (webPrintStage === 'not-submitted' || webPrintStage === 'failure') {
          <div class="flex flex-column">
            <span class="body-header">Would you like to compile a print preview?</span>
            <span class="body-text">
              Review your in-progress report by creating a PDF print preview. This could take a few moments, depending
              on the size of the report.
            </span>
          </div>
          <div>
            <button
              pButton
              pRipple
              appSingleClick
              label="Create PDF print preview"
              class="p-button-warning"
              [pt]="{ label: 'font-karla-bold' }"
              (click)="submitPrintJob()"
            ></button>
          </div>
          <div>
            <button
              pButton
              pRipple
              appSingleClick
              label="Continue without reviewing"
              class="p-button-info"
              [pt]="{ label: 'font-karla-bold' }"
              (click)="submitPrintJob()"
            ></button>
          </div>
        } @else {
          <div class="flex flex-column">
            <span class="body-header">YOUR PRINT PREVIEW IS READY!</span>
            <span class="body-text">
              Download a previous print preview or create a new one to see recent changes.
            </span>
          </div>
          <div>
            <button
              pButton
              pRipple
              appSingleClick
              label="Download PDF"
              class="p-button-info m"
              [pt]="{ label: 'font-karla-bold' }"
              (click)="downloadPDF()"
            ></button>
            <div class="inner-body-text">
              <span class="font-karla-bold">Last created:&nbsp;</span
              ><span class="font-karla">{{ formattedDate() }}</span>
            </div>
          </div>
          <div>
            <button
              pButton
              pRipple
              appSingleClick
              label="Compile PDF"
              class="p-button-warning"
              [pt]="{ label: 'font-karla-bold' }"
              (click)="submitPrintJob()"
            ></button>
            <div class="inner-body-text">
              <span class="font-karla">Make changes to your report? To review recent changes, create a new PDF. </span>
            </div>
          </div>
        }
      </div>
      <div class="w-6 align-content-center">
        <img ngSrc="assets/img/PDFicon.svg" draggable="false" alt="pdf file" height="284" width="284" />
      </div>
    </div>
  }

  <!-- @if (webPrintStage === 'not-submitted' || webPrintStage === 'failure') {
  @if (webPrintStage === 'failure') {
    <h2 class="align-center">Printing error:<br />{{ printError }}</h2>
  }
}
@if (webPrintStage === 'success') {
  <h2 class="align-center h1">PDF compiled</h2>
  <div class="bold align-center">SUBMITTED ON:</div>
  <div class="align-center">{{ submitDate }}</div>

  <button pButton pRipple label="Open PDF" class="p-button-info button-full-width" (click)="downloadPDF()"></button>

  <p class="align-center"><strong>OR</strong></p>

  <button
    pButton
    pRipple
    appSingleClick
    label="Compile New PDF"
    class="p-button-warning button-full-width"
    (click)="submitPrintJob()"
  ></button>
} -->
  <hr class="mt-5 mb-3" />
  <div class="flex justify-content-between">
    <button
      pButton
      pRipple
      class="p-button-secondary icon-gap"
      (click)="router.navigateByUrl(getBackUrl?.(report) ?? '')"
    >
      <span class="prev-arrow-mask"></span>
      <span>Review detailed summary page</span>
    </button>

    <button
      pButton
      pRipple
      class="p-button-primary icon-gap"
      (click)="router.navigateByUrl(getContinueUrl?.(report) ?? '')"
    >
      <span>Sign & submit report</span>
      <span class="next-arrow-mask"></span>
    </button>
  </div>
</div>
