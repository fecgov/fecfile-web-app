<div class="grid">
  <div class="col-12">
    <h1 class="super-header no-vert-margins">Print preview</h1>
  </div>
</div>
<div class="grid">
  <div class="col-12">
    <h3 class="no-vert-margins">
      <strong>{{ report.formLabel }}:</strong> {{ report.formSubLabel }}
    </h3>
    <hr class="black-line" />
  </div>
</div>
<p-card>
  <div class="grid">
    <ng-container *ngIf="webPrintStage === 'not-submitted' || webPrintStage === 'failure'">
      <div class="col-12">
        <h2 class="no-vert-margins">Would you like to compile a print preview?</h2>
      </div>
    </ng-container>
    <div class="col-12 flex justify-content-center">
      <img
        [ngClass]="{ 'disabled-pages-banner': webPrintStage === 'checking' && !report.webprint_submission?.fec_status }"
        alt="Print success image"
        class="image-max-width image-centered-horiz"
        draggable="false"
        height="271"
        ngSrc="assets/img/image-placeholder.png"
        width="450"
      />
      <ng-container *ngIf="webPrintStage === 'checking' && !report.webprint_submission?.fec_status">
        <div class="fec-loader-div col-12">
          <img
            alt="The report's web print status is loading..."
            class="image-max-width fec-loader-image"
            draggable="false"
            height="103"
            ngSrc="assets/img/fec-loading-flag.gif"
            width="114"
          />
          <h1 class="align-center super-header">
            <br /><br />
            <strong>Compiling your preview</strong>
            <br />
          </h1>
          <h2 class="align-center">
            {{ pollingStatusMessage }}
          </h2>
        </div>
      </ng-container>
    </div>
    <ng-container *ngIf="webPrintStage === 'checking' && report.webprint_submission?.fec_status === 'PROCESSING'">
      <div class="col-12">
        <h1 class="align-center">
          <br /><br />
          <strong>Your report is still being processed...</strong>
          <br />
        </h1>
        <h3 class="align-center">PLEASE CHECK BACK LATER TO ACCESS YOUR PDF</h3>
      </div>
    </ng-container>
  </div>
  <div class="grid">
    <ng-container *ngIf="webPrintStage === 'not-submitted' || webPrintStage === 'failure'">
      <ng-container *ngIf="webPrintStage === 'failure'">
        <div class="col-12">
          <h2 class="align-center">Printing error:<br />{{ printError }}</h2>
        </div>
      </ng-container>
      <div class="col-5"></div>
      <div class="col-2">
        <button
          (click)="submitPrintJob()"
          appSingleClick
          class="p-button-warning button-full-width"
          label="Compile PDF"
          pButton
          pRipple
        ></button>
      </div>
    </ng-container>
    <ng-container *ngIf="webPrintStage === 'success'">
      <h1 class="col-12 align-center">PDF compiled</h1>
      <div class="bold col-12 align-center">SUBMITTED ON:</div>
      <div class="col-12 align-center">{{ submitDate }}</div>
      <div class="col-3"></div>
      <div class="col-2">
        <button
          (click)="downloadPDF()"
          class="p-button-info button-full-width"
          label="Open PDF"
          pButton
          pRipple
        ></button>
      </div>
      <div class="col-2">
        <p class="align-center"><strong>OR</strong></p>
      </div>
      <div class="col-2">
        <button
          (click)="submitPrintJob()"
          appSingleClick
          class="p-button-warning button-full-width"
          label="Compile New PDF"
          pButton
          pRipple
        ></button>
      </div>
    </ng-container>
  </div>

  <p-divider></p-divider>
  <div class="grid">
    <div class="col-2">
      <button
        (click)="router.navigateByUrl(getBackUrl?.(report) ?? '')"
        class="p-button-secondary p-button-outlined button-full-width"
        label="Back"
        pButton
        pRipple
      ></button>
    </div>
    <div class="col-7"></div>
    <div class="col-3">
      <button
        (click)="router.navigateByUrl(getContinueUrl?.(report) ?? '')"
        class="p-button-secondary button-full-width"
        label="Sign & submit report"
        pButton
        pRipple
      ></button>
    </div>
  </div>
</p-card>
