<div id="print-preview-container" [class.sidebar-version]="layoutService.showSidebar()">
  <h1 data-cy="print-preview">Print preview</h1>
  <hr class="mb-5" />

  @if (webPrintStage === 'checking') {
    <div class="flex flex-column align-items-center">
      <img
        class="image-max-width fec-loader-image mt-5 mb-7"
        src="assets/img/fec-loading-flag.gif"
        draggable="false"
        alt="The report's web print status is loading..."
        height="100"
      />
      <span class="body-header">CREATING YOUR PRINT PREVIEW?</span>
      <span class="body-text">This could take a few moments depending on the size of the report.</span>
    </div>
  } @else {
    <div class="flex">
      <div id="left-content">
        @if (webPrintStage === 'not-submitted' || webPrintStage === 'failure') {
          <div class="flex flex-column">
            <span class="body-header">
              Would you like to compile a print preview?
              <span class="font-karla">(OPTIONAL)</span>
            </span>
            <span class="body-text">
              Review your in-progress report by creating a PDF print preview. This could take a few moments, depending
              on the size of the report.
            </span>
          </div>
          <div>
            <button
              pButton
              pRipple
              appSingleClick
              label="Create PDF print preview"
              class="p-button-warning"
              (click)="submitPrintJob()"
            ></button>
          </div>
        } @else {
          <div class="flex flex-column">
            <span class="body-header">YOUR PRINT PREVIEW IS READY!</span>
            <span class="body-text">
              Download a previous print preview or create a new one to see recent changes.
            </span>
          </div>
          <div>
            <button
              pButton
              pRipple
              appSingleClick
              label="Download PDF"
              class="p-button-info m"
              (click)="downloadPDF()"
            ></button>
            <div class="inner-body-text">
              <span class="font-karla-bold">Last created:&nbsp;</span
              ><span class="font-karla">{{ formattedDate() }}</span>
            </div>
          </div>
          <div>
            <button
              pButton
              pRipple
              appSingleClick
              label="Compile PDF"
              class="p-button-warning"
              (click)="submitPrintJob()"
            ></button>
            <div class="inner-body-text">
              <span class="font-karla">Make changes to your report? To review recent changes, create a new PDF. </span>
            </div>
          </div>
        }
      </div>
      <div id="right-content">
        <img src="assets/img/PDFicon.svg" draggable="false" alt="pdf file" width="284" />
      </div>
    </div>
  }

  <!-- @if (webPrintStage === 'not-submitted' || webPrintStage === 'failure') {
  @if (webPrintStage === 'failure') {
    <h2 class="align-center">Printing error:<br />{{ printError }}</h2>
  }
} -->
  <hr class="mt-5 mb-3" />
  <div class="flex justify-content-between">
    <button
      pButton
      pRipple
      class="p-button-secondary icon-gap"
      (click)="router.navigateByUrl(getBackUrl?.(report) ?? '')"
    >
      <span class="prev-arrow-mask"></span>
      <span>Review detailed summary page</span>
    </button>

    <button
      pButton
      pRipple
      class="p-button-primary icon-gap"
      (click)="router.navigateByUrl(getContinueUrl?.(report) ?? '')"
    >
      <span>Sign & submit report</span>
      <span class="next-arrow-mask"></span>
    </button>
  </div>
</div>
