<p-toast></p-toast>

<h1>Confirm information</h1>
<h5>
  <strong>{{ report?.formLabel }}:</strong> {{ report?.formSubLabel }}
</h5>
<p-divider></p-divider>
<div class="p-fluid">
  <p-card>
    <form [formGroup]="form" [ngClass]="{ 'ng-submitted': formSubmitted }" id="form">
      <div class="grid">
        <div class="col-12">
          <div class="field">
            <h2>Verify confirmation email addresses</h2>
          </div>
        </div>
      </div>
      <div class="grid">
        <div class="col-12">
          <div class="field">
            <label for="confirmation_email_1"><strong>Email #1</strong></label>
            <input formControlName="confirmation_email_1" id="confirmation_email_1" pInputText type="text" />
            <app-error-messages
              [formSubmitted]="formSubmitted"
              [form]="form"
              fieldName="confirmation_email_1"
            ></app-error-messages>
          </div>
        </div>
        <div class="col-12">
          <div class="field">
            <label for="confirmation_email_2"><strong>Email #2</strong> (Optional)</label>
            <input formControlName="confirmation_email_2" id="confirmation_email_2" pInputText type="text" />
            <app-error-messages
              [formSubmitted]="formSubmitted"
              [form]="form"
              fieldName="confirmation_email_2"
            ></app-error-messages>
          </div>
        </div>
      </div>
      <div *ngIf="report?.hasChangeOfAddress">
        <p-divider></p-divider>
        <div class="grid">
          <div class="col-12">
            <div class="field">
              <h3>Verify physical address</h3>
              <br />
              <div>Has your address changed in the last 10 days?</div>
            </div>
          </div>
        </div>
        <div class="grid">
          <div class="col-2">
            <div class="field">
              <div class="radio-button-spacer">
                <p-radioButton
                  [value]="true"
                  ariaLabel="Address has changed in the last 10 days"
                  formControlName="change_of_address"
                  label="YES"
                  name="change_of_address"
                ></p-radioButton>
              </div>
              <app-error-messages
                [formSubmitted]="formSubmitted"
                [form]="form"
                fieldName="change_of_address"
                patternErrorMessage="Please select 'Yes' or 'No'"
              ></app-error-messages>
            </div>
          </div>
          <div class="col-2">
            <div class="field">
              <div class="radio-button-spacer">
                <p-radioButton
                  [value]="false"
                  ariaLabel="Address has not changed in the last 10 days"
                  formControlName="change_of_address"
                  label="NO"
                  name="change_of_address"
                ></p-radioButton>
              </div>
            </div>
          </div>
        </div>
      </div>

      <ng-container *ngIf="form.get('change_of_address')?.value">
        <!--

        Per a discussion with Mitchell, this section is commented out 
        pending a later review of the requirements.

      <div class="col-12">
        Within 10 days of an address change you must notify the FEC by amending your Form 1, in addition to updating
        your address here.
        <a href="https://webforms.fec.gov/webforms/form1/index.htm" target="_blank" rel="noopener"
          >Update your committee address</a
        >.
      </div>
      -->
        <div class="grid">
          <div class="col-6">
            <div class="field">
              <label for="street_1">STREET ADDRESS</label>
              <input formControlName="street_1" id="street_1" pInputText type="text" />
              <app-error-messages
                [formSubmitted]="formSubmitted"
                [form]="form"
                fieldName="street_1"
              ></app-error-messages>
            </div>
          </div>
          <div class="col-6">
            <div class="field">
              <label for="street_2">APARTMENT, SUITE, ETC. (OPTIONAL)</label>
              <input formControlName="street_2" id="street_2" pInputText type="text" />
              <app-error-messages
                [formSubmitted]="formSubmitted"
                [form]="form"
                fieldName="street_2"
              ></app-error-messages>
            </div>
          </div>
        </div>
        <div class="grid">
          <div class="col-6">
            <div class="field">
              <label for="city">CITY</label>
              <input formControlName="city" id="city" pInputText type="text" />
              <app-error-messages [formSubmitted]="formSubmitted" [form]="form" fieldName="city"></app-error-messages>
            </div>
          </div>
          <div class="col-3">
            <div class="field">
              <label for="state">STATE/PROVINCE</label>
              <p-dropdown
                [autoDisplayFirst]="false"
                [options]="stateOptions"
                appendTo="body"
                formControlName="state"
                inputId="state"
              ></p-dropdown>
              <app-error-messages [formSubmitted]="formSubmitted" [form]="form" fieldName="state"></app-error-messages>
            </div>
          </div>
          <div class="col-3">
            <div class="field">
              <label for="zip">ZIP/POSTAL CODE</label>
              <input formControlName="zip" id="zip" pInputText type="text" />
              <app-error-messages [formSubmitted]="formSubmitted" [form]="form" fieldName="zip"></app-error-messages>
            </div>
          </div>
        </div>
      </ng-container>
      <p-divider></p-divider>
      <div class="grid">
        <div class="col-2">
          <button
            (click)="router.navigateByUrl(getBackUrl?.(report) ?? '')"
            class="p-button-secondary"
            label="Back"
            pButton
            pRipple
          ></button>
        </div>
        <div class="col-6"></div>
        <div class="col-4">
          <button
            (click)="continue()"
            appSingleClick
            class="p-button-primary"
            label="Confirm information"
            pButton
            pRipple
          ></button>
        </div>
      </div>
    </form>
  </p-card>
</div>
