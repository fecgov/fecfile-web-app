<div [formGroup]="form">
  <div class="grid">
    <ng-container *ngIf="memoCodeMapOptions.length === 0">
      <div class="col-12">
        <p-checkbox
          #memoCode
          (click)="onMemoItemClick()"
          [binary]="true"
          [falseValue]="false"
          [formControlName]="templateMap['memo_code']"
          [label]="checkboxLabel"
          [readonly]="memoCodeReadOnly"
          [trueValue]="true"
          ariaLabel="have memo item"
          inputId="memo_code"
        ></p-checkbox>
        <span
          class="pi pi-info-circle"
          pTooltip="{{ memoItemHelpText }}"
          style="font-size: 1.5rem; margin-left: 0.5rem"
        ></span>
      </div>
      <div class="col-12">
        <app-error-messages
          [fieldName]="templateMap['memo_code']"
          [formSubmitted]="formSubmitted"
          [form]="form"
        ></app-error-messages>
      </div>
    </ng-container>
    <ng-container *ngIf="memoCodeMapOptions.length > 0">
      <div class="col-3">
        <p-selectButton
          #memoCode
          [formControlName]="templateMap['memo_code']"
          [options]="memoCodeMapOptions"
          inputId="memo_code"
          optionLabel="label"
          optionValue="value"
        ></p-selectButton>
      </div>
      <div class="col-12">
        <ng-container *ngIf="memoControl?.value === true">
          <span
            class="pi pi-check"
            pTooltip="{{ memoItemHelpText }}"
            style="font-size: 1rem; margin-left: 0.5rem"
          ></span>
          MEMO ITEM
        </ng-container>
        <ng-container *ngIf="memoControl?.value === false"> NOT A MEMO ITEM</ng-container>
        <span
          *ngIf="memoControl?.value !== undefined"
          class="pi pi-info-circle"
          pTooltip="{{ memoItemHelpText }}"
          style="font-size: 1.5rem; margin-left: 0.5rem"
        ></span>
      </div>
      <div class="col-12">
        <app-error-messages
          [fieldName]="templateMap['memo_code']"
          [formSubmitted]="formSubmitted"
          [form]="form"
          [patternErrorMessage]="'This is a required field.'"
        ></app-error-messages>
      </div>
    </ng-container>
  </div>
  <p-dialog [(visible)]="outOfDateDialogVisible" [modal]="true" [style]="{ width: '496px' }" header="Header">
    <ng-template pTemplate="header">
      <span class="text-xl" id="out-of-date-dialog-header">Just checking...</span>
    </ng-template>
    <p id="out-of-date-dialog-text">
      <b>
        {{ coverageDate | fecDate }}
      </b>
      falls outside the report coverages dates of
      <b> {{ report?.coverage_from_date | fecDate }}-{{ report?.coverage_through_date | fecDate }}</b
      >. {{ coverageDateQuestion }} <br /><br />
      If the date entered is correct, this transaction must be a <b>Memo Item</b>.
    </p>
    <div class="grid">
      <div class="mx-auto">
        <button
          (click)="closeOutOfDateDialog()"
          [autofocus]="true"
          class="p-button"
          id="out-of-date-dialog-button"
          label="Close"
          pButton
          styleClass="p-button-link"
          type="button"
        ></button>
      </div>
    </div>
  </p-dialog>
</div>
